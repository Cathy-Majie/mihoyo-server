"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FrameworkErrorFormater = void 0;
const framework_base_error_1 = require("./framework_base_error");
const util = require("util");
const os = require("os");
const hostname = os.hostname();
class FrameworkErrorFormater {
    static format(err) {
        let errMessage = err.message;
        if (framework_base_error_1.FrameworkBaseError.isFrameworkError(err)) {
            errMessage += ` [${this.faqPrefixEnv || this.faqPrefix}/${err.code}]`;
        }
        const errStack = err.stack || 'no_stack';
        return util.format('framework.%s: %s\n%s\ncode: %s\nserialNumber: %s\nerrorContext: %j\npid: %s\nhostname: %s\n', err.name, errMessage, errStack.substring(errStack.indexOf('\n') + 1), err.code, err.serialNumber, err.errorContext, process.pid, hostname);
    }
    static formatError(err) {
        if (framework_base_error_1.FrameworkBaseError.isFrameworkError(err)) {
            err.message += ` [${this.faqPrefixEnv || this.faqPrefix}/${err.code}]`;
        }
        return err;
    }
}
exports.FrameworkErrorFormater = FrameworkErrorFormater;
FrameworkErrorFormater.faqPrefix = 'https://eggjs.org/zh-cn/faq';
FrameworkErrorFormater.faqPrefixEnv = process.env.EGG_FRAMEWORK_ERR_FAQ_PERFIX;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZm9ybWF0dGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGlFQUE0RDtBQUM1RCw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCLE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztBQUUvQixNQUFhLHNCQUFzQjtJQUlqQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQVU7UUFDdEIsSUFBSSxVQUFVLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQztRQUM3QixJQUFJLHlDQUFrQixDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQzVDLFVBQVUsSUFBSSxLQUFLLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUM7U0FDdkU7UUFDRCxNQUFNLFFBQVEsR0FBRyxHQUFHLENBQUMsS0FBSyxJQUFJLFVBQVUsQ0FBQztRQUV6QyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsNkZBQTZGLEVBQzlHLEdBQUcsQ0FBQyxJQUFJLEVBQ1IsVUFBVSxFQUNWLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFDOUMsR0FBRyxDQUFDLElBQUksRUFDUixHQUFHLENBQUMsWUFBWSxFQUNoQixHQUFHLENBQUMsWUFBWSxFQUNoQixPQUFPLENBQUMsR0FBRyxFQUNYLFFBQVEsQ0FDVCxDQUFDO0lBQ0osQ0FBQztJQUVELE1BQU0sQ0FBQyxXQUFXLENBQWtCLEdBQU07UUFDeEMsSUFBSSx5Q0FBa0IsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUM1QyxHQUFHLENBQUMsT0FBTyxJQUFJLEtBQUssSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsU0FBUyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQztTQUN4RTtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7QUE1Qkgsd0RBNkJDO0FBNUJrQixnQ0FBUyxHQUFHLDZCQUE2QixDQUFDO0FBQzVDLG1DQUFZLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyJ9